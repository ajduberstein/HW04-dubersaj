#include "Starbucks.h"
#include "Quadtree.h"

void Quadtree::build(Entry* c, int n){
	//Computes the centroid
	double x_centroid = 0;
	double y_centroid = 0;
	for (int i = 0; i < n; i++){
		x_centroid += c[i].x;
		y_centroid += c[i].y;
	}
	x_centroid /= n;
	y_centroid /= n;
	Entry centroid;
	centroid.x = x_centroid;
	centroid.y = y_centroid;
	//Using the centroid, constructs the quadtree
	Quadtree t = new Quadtree();
	t.setEntry(centroid);
	for (int i = 0; i < n; i++)
}

void Quadtree::subdivide(Quadtree* inserted_point, Quadtree* current_point){
	if(inserted_point.y > current_point.y)
	{
		if(inserted_point.x <= current_point.x)
			if(!occupied)
				current_point->northWest = inserted_point;
			else
				subdivide(inserted_point, current_point->northWest);
		else
			if(!occupied)
				current_point->northEast = inserted_point;
			else
				subdivide(inserted_point, current_point->northEast);
	}
	else if (inserted_point.y <= current_point.y)
	{
		if(inserted_point.x <= current_point.x)
			if(!occupied)
				current_point->southWest = inserted_point;
			else
				southWest.subdivide();
		else
			if(!occupied)
				current_point->southEast = inserted_point;
			else
				southEast.subdivide();	
	}
	else{
		console() << "Honestly, this case shouldn't happen." << std::endl;
	}
}

Entry* Quadtree::getNearest(double x, double y){
	return 0;
}

//Getters
Quadtree* Quadtree::getNorthWest(){
	return northWest;
}
Quadtree* Quadtree::getNorthEast(){
	return northEast;
}
Quadtree* Quadtree::getSouthWest(){
	return southWest;
}
Quadtree* Quadtree::getSouthEast(){
	return southEast;
}
Entry* Quadtree::getEntry(){
	return location;
}

//Setters for directional nodes
void Quadtree::setNorthWest(Quadtree* t){
	northWest = t;
}
void Quadtree::setNorthEast(Quadtree* t){
	northEast = t;
}
void Quadtree::setSouthWest(Quadtree* t){
	southWest = t;
}
void Quadtree::setSouthEast(Quadtree* t){
	southEast = t;
}
void Quadtree::setEntry(Entry* e){
	location = e;
}
